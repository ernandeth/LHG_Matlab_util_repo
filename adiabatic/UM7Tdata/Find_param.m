function varargout=Find_param(filename,varargin)% This function returns the values of a group of parameters stored in the% "procpar" file used by the Varian system.% The input parameters are "filename" and "varargin"% "filename" is any valid file name used by Matlab and it should include% a valid path and filename, usually '...~/procpar'.% If "filename" is omited, the program presents a window to find a valid% "procpar" file.% "varargin" is a cell array containing the names of the parameters and% "varargout" is a cell array with the values of each parameter.%% Examples:%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ...% param_names={'sw','np','lro','lpe'};% ...% [sw,np,lro,lpe]=Find_param('c:\Image1\procpar',param_names) --> Assigns the value%                           of the parameters "sw", "np", "lro", and "lpe", stored%                           in the "procpar" file "c:\Image1\procpar" to the group%                           of variables with the same name.%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% ...% param_names={'sw','np','lro','lpe'};% ...% [sw,np,lro,lpe]=Find_param(param_names) --> Same as before but this time the program%                         asks the user the name and location of the "procpar" file%                         using a MATLAB predefined window to open a file.%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% [sw,np,lro,lpe]=Find_param({'sw','np','lro','lpe'}) --> Same as before but this time%                         the cell array "param_names" is not created as a variable%                         in the main program.%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% If a parameter does not exist in the "procpar" file, the message "Not Used" % is assigned to the respective variable.%% Rev. 1.0   Jul/22/2001% Francisco M. Martinez S.% Please send comments and/or modifications to sfmartin@umich.edu%if nargin==1   [par,val]=readprocpar;   [param_names,I]=sort(filename);elseif nargin==2   [par,val]=readprocpar(filename);   [param_names,I]=sort(cellstr(varargin{1}));else   disp('Too many input arguments');endfor j=1:size(param_names,2)   for i=1:size(par,1)+1      if i <= size(par,1)         if strcmp(deblank(par(i,:)),param_names(j))            varargout(I(j))=val(i);            break;         end      else         varargout(I(j))={'Not Used'};      end   endend